# é¢å‘å¯¹è±¡

**ç±»**ï¼ˆClassï¼‰å’Œ**å¯¹è±¡**ï¼ˆObjectï¼‰æ˜¯é¢å‘å¯¹è±¡ä¸¤ä¸ªæ ¸å¿ƒå…ƒç´ ã€‚

::: info

ç±»ï¼šå…·æœ‰ç›¸åŒç‰¹å¾çš„äº‹ç‰©çš„æŠ½è±¡æè¿°ï¼Œæ˜¯ æŠ½è±¡çš„ã€æ¦‚å¿µä¸Šçš„å®šä¹‰ã€‚

å¯¹è±¡ï¼šç”±ç±»æ´¾ç”Ÿå‡ºæ¥çš„å®åœ¨çš„ä¸ªä½“ï¼Œæ˜¯å…·ä½“çš„ï¼Œå› æ­¤ä¹Ÿç§°ä¸º å®ä¾‹ï¼ˆInstanceï¼‰ã€‚

:::



## Classç±»

::: warning æ³¨æ„

1. ä¸€ä¸ª<span style="color:#CC0000;">æºæ–‡ä»¶ä¸­åªèƒ½æœ‰ä¸€ä¸ª public ç±»</span>ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªé public ç±»ï¼›
2. æºæ–‡ä»¶ä¸­ç±»çš„åç§°åº”è¯¥å’Œæºæ–‡ä»¶çš„åç§°ä¿æŒä¸€è‡´ã€‚å¦‚æºæ–‡ä»¶åä¸º Person.javaï¼Œåˆ™æºæ–‡ä»¶ä¸­çš„ public ç±»çš„ç±»ååº”è¯¥æ˜¯ Personã€‚

:::

```java
public class Phone {
  String name;
  double price;

  public void call() {
    System.out.println("Calling");
  }
  
  public void sendMessage(String message) {
    System.out.println(message);
  }
}
```

ä¸€ä¸ªç±»å¯ä»¥åŒ…å«ä»¥ä¸‹ç±»å‹å˜é‡ï¼š

- **å±€éƒ¨å˜é‡**ï¼šåœ¨æ–¹æ³•ã€æ„é€ å™¨ã€è¯­æ³•å—ä¸­å®šä¹‰çš„å˜é‡è¢«ç§°ä¸ºå±€éƒ¨å˜é‡ã€‚å®ƒçš„ç”Ÿå‘½å‘¨æœŸéšç€å‡½æ•°çš„é”€æ¯è€Œé”€æ¯ï¼›
- **æˆå‘˜å˜é‡**ï¼šå®šä¹‰åœ¨ç±»ä¸­ã€æ–¹æ³•ä½“å¤–çš„å˜é‡ã€‚è¿™ä¸­å˜é‡åœ¨åˆ›å»ºå¯¹è±¡æ—¶å°±ä¼šåˆå§‹åŒ–ï¼Œå¹¶ä¸”å¯ä»¥è¢«ç±»ä¸­çš„æ–¹æ³•è°ƒç”¨ï¼›
- **ç±»å˜é‡**ï¼šç±»å˜é‡ä¹Ÿå£°æ˜åœ¨ç±»ä¸­ï¼Œæ–¹æ³•ä½“ä¹‹å¤–ï¼Œä½†å¿…é¡»ä½¿ç”¨ `static` ä¿®é¥°ï¼›



### æ„é€ æ–¹æ³•

æ¯ä¸ªç±»éƒ½æœ‰æ„é€ æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ˜¾ç¤ºæŒ‡å®šæ„é€ æ–¹æ³•ï¼ŒJava ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºè¯¥ç±»æä¾›ä¸€ä¸ªé»˜è®¤æ„é€ æ–¹æ³•ã€‚

åœ¨åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•åç§°å¿…é¡»ä¸ç±»åç§°ç›¸åŒã€‚

```java
public class Person {
  public Person() {
  }

  public Person(String name) {
  }
}
```



### å¯å˜å½¢å‚

å¯å˜å‚æ•°ï¼Œå…è®¸ä¸€ä¸ªæ–¹æ³•æ¥å—å¯å˜æ•°é‡çš„å‚æ•°ã€‚

å¯å˜å‚æ•°ä½¿ç”¨çœç•¥å· `...` æ¥å®šä¹‰ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’ä¸åŒæ•°é‡çš„å‚æ•°ï¼Œè€Œä¸éœ€è¦ä¸ºæ¯ç§æƒ…å†µåˆ›å»ºä¸åŒçš„æ–¹æ³•é‡è½½ã€‚

::: warning æ³¨æ„

1. å¯å˜å‚æ•°å¿…é¡»å£°æ˜åœ¨æ–¹æ³•å‚æ•°çš„æœ€åé¢ï¼›
2. å¯å˜å‚æ•°åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ï¼›

:::

```java [9,13]
public class ArguTest {
  public static void main(String[] args) {
    ArguTest test = new ArguTest();
    test.add();
    test.add(1);
    test.add(1, 2);
  }

  public void add(int... nums) {
    System.out.println("arguments");
  }

  // å¯å˜å‚æ•°å¿…é¡»å£°æ˜åœ¨æ–¹æ³•å‚æ•°çš„æœ€åé¢
  public void add(int i, int... nums) {
    System.out.println("many arguments");
  }
}
```

>ğŸ”” æ€è€ƒï¼šå¯å˜å‚æ•°çš„æ–¹æ³• å’Œ æ˜ç¡®å‚æ•°ä¸ªæ•°çš„æ–¹æ³•ï¼Œä¼šä¼˜å…ˆè°ƒç”¨è°å‘¢ï¼Ÿ
>ç­”æ¡ˆæ˜¯ä¼˜å…ˆè°ƒç”¨æ˜ç¡®å‚æ•°ä¸ªæ•°çš„æ–¹æ³•ã€‚



ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ`add()` æ–¹æ³•æ„æˆäº†é‡è½½ï¼Œå¹¶ä¸”æŒ‰ç…§å‚æ•°ä¸ªæ•°è°ƒç”¨æŒ‡å®šçš„æ–¹æ³•ã€‚

```java
public class ArguTest {
  public static void main(String[] args) {
    ArguTest test = new ArguTest();
    test.add();
    test.add(1);
    test.add(1, 2);
  }

  public void add(int... nums) {
    System.out.println("arguments");
  }

  public void add(int a) {
    System.out.println("a");
  }

  public void add(int a, int b) {
    System.out.println("a b");
  }
}
```



### é€’å½’æ–¹æ³•

é€’å½’ å°±æ˜¯æ–¹æ³•è‡ªå·±è°ƒç”¨è‡ªå·±ã€‚

::: warning æ³¨æ„

1. é€’å½’è°ƒç”¨ä¼šå ç”¨å¤§é‡çš„ç³»ç»Ÿå †æ ˆï¼Œå†…å­˜æ¶ˆè€—å¤šï¼Œå› æ­¤åœ¨é€’å½’è°ƒç”¨å±‚æ¬¡å¤šæ—¶æ•ˆç‡ä¸å¦‚å¾ªç¯ï¼Œæ‰€ä»¥è¦è°¨æ…ä½¿ç”¨é€’å½’ï¼›
2. åœ¨è¦æ±‚é«˜æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œå°½é‡é¿å…ä½¿ç”¨é€’å½’ï¼Œè€ƒè™‘ä½¿ç”¨å¾ªç¯è¿­ä»£ï¼›

:::

é€’å½’æ–¹æ³•å¯ä»¥åˆ†ä¸ºç›´æ¥é€’å½’å’Œé—´æ¥é€’å½’ã€‚

```java
// ç›´æ¥é€’å½’
public void method() {
  System.out.println("method()...");
  method();
}

// é—´æ¥é€’å½’
public void A() {
  B();
}

public void B() {
  C();
}

public void C() {
  A();
}
```



>æ¡ˆä¾‹ä¸€ï¼šè®¡ç®— 1 ~ 100 çš„åŠ æ³•å’Œ

```java
public int getSum1(int num) {
  if (num == 1) {
    return 1;
  } else {
    return getSum1(num - 1) + num;
  }
}
```



>æ¡ˆä¾‹äºŒï¼šè®¡ç®—æ–æ³¢é‚£å¥‘åºåˆ—

```java
// è®¡ç®—æ–æ³¢é‚£å¥‘åºåˆ—(è¯¥æ–¹æ³•å­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œå¯ä»¥è¿›è¡Œä¼˜åŒ–)
public int f(int n) {
  if (n == 1 || n == 2) {
    return 1;
  } else {
    return f(n - 1) + f(n - 2);
  }
}
```



## Objectå¯¹è±¡

åœ¨ java ä¸­ï¼ŒObject å¯¹è±¡æ˜¯é¡¶çº§çš„ä¸€ä¸ªç±»ï¼Œå…¶ä»– Class ç±»å’Œ Arrayæ•°ç»„éƒ½ç»§æ‰¿è‡ª Object å¯¹è±¡ã€‚

```java {9}
public static void main(String[] args) {
  Person p = new Person();

  p.setName("ç‹ä¸€åš");
  System.out.println(p.getName()); //ç‹ä¸€åš

  p.eat(); //äººåƒé¥­é¥­...

  if (p instanceof Object) {
    System.out.println("Person3 is Object"); //Person3 is Object
  }
}

class Person {
  private String name;

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public void eat() {
    System.out.println("äººåƒé¥­é¥­...");
  }
}
```



### equals()

`equals()` æ–¹æ³•ç”¨äº <span style="color:#CC0000;">æ¯”è¾ƒä¸¤ä¸ª å¼•ç”¨æ•°æ®ç±»å‹ çš„å€¼æ˜¯å¦ç›¸ç­‰</span>ã€‚

::: warning æ³¨æ„

å¦‚æœè‡ªå®šä¹‰çš„ Class ç±»æ²¡æœ‰é‡å†™ equals() æ–¹æ³•çš„è¯ï¼Œä¼šé»˜è®¤è°ƒç”¨ Object ç±»ä¸­çš„ equals() ï¼Œè¿™æ—¶å€™æ˜¯ä½¿ç”¨ == è¿›è¡Œæ¯”è¾ƒçš„ï¼Œæ˜¯æ¯”è¾ƒåœ°å€å€¼æ˜¯å¦ç›¸åŒã€‚

:::

:::code-group

```java [ä¸é‡å†™equals] {5}
public static void main(String[] args) {
  User user1 = new User("ç‹ä¸€åš", 23);
  User user2 = new User("ç‹ä¸€åš", 23);

  System.out.println(user1.equals(user2)); //false
}

class User {
  private String name;
  private int age;

  public User(String name, int age) {
    this.age = age;
    this.name = name;
  }
}
```

```java [é‡å†™equals] {5,17-22}
public static void main(String[] args) {
  User user1 = new User("ç‹ä¸€åš", 23);
  User user2 = new User("ç‹ä¸€åš", 23);

  System.out.println(user1.equals(user2)); //true
}

class User {
  private String name;
  private int age;

  public User(String name, int age) {
    this.age = age;
    this.name = name;
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) return true;
    if (!(o instanceof User user)) return false;
    return age == user.age && Objects.equals(name, user.name);
  }
}
```

:::



::: info é¢è¯•é¢˜ï¼šjava ä¸­ == å’Œ equals() æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

1. == åœ¨åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨ï¼Œåœ¨åŸºæœ¬æ•°æ®ç±»å‹æ¯”è¾ƒæ—¶ï¼Œå°±æ˜¯æ¯”è¾ƒå€¼æ˜¯å¦ç›¸åŒï¼Œä½†åœ¨å¼•ç”¨æ•°æ®ç±»å‹ä¸­æ¯”è¾ƒæ—¶ï¼Œæ˜¯æ¯”è¾ƒåœ°å€å€¼æ˜¯å¦ç›¸åŒï¼›
2. equals() æ–¹æ³•åªèƒ½åœ¨å¼•ç”¨æ•°æ®ç±»å‹ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é‡å†™ equals() æ–¹æ³•ï¼Œå¦åˆ™é»˜è®¤è°ƒç”¨ Object ä¸­çš„ equals()ã€‚ä½†æ˜¯ï¼ŒStringç±»å‹é™¤å¤–ï¼Œå› ä¸ºå®ƒå·²ç»é»˜è®¤é‡å†™è¿‡äº†ï¼Œå®ƒå°±æ˜¯åœ¨æ¯”è¾ƒå†…å®¹å€¼æ˜¯å¦ç›¸åŒã€‚

:::



### toString()

`toString()` æ–¹æ³•æ˜¯ Object ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªç±»ç»§æ‰¿è‡ª Objectï¼Œå› æ­¤æ¯ä¸ªç±»éƒ½ä¼šæœ‰ `toString()` æ–¹æ³•ã€‚

å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯<span style="color:#CC0000;">è¿”å›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</span>

```java
public static void main(String[] args) {
  Person person = new Person("ç‹ä¸€åš", 23);

  System.out.println(person.toString()); //Person{name='ç‹ä¸€åš', age=23}
  System.out.println(person); //Person{name='ç‹ä¸€åš', age=23}
}

class Person {
  private String name;
  private int age;

  public Person(String name, int age) {
    this.name = name;
    this.age = age;
  }

  @Override
  public String toString() {
    return "Person{" +
      "name='" + name + '\'' +
      ", age=" + age +
      '}';
  }
}
```



### clone()

`Clone()` æ–¹æ³•ç”¨äºå…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œå…‹éš†çš„å¯¹è±¡å’ŒåŸæ¥å¯¹è±¡æ˜¯ä¸¤ä¸ªä¸åŒçš„åœ°å€å€¼ï¼ŒäºŒè€…ä¸ä¼šç›¸äº’å½±å“ã€‚

::: code-group

```java {16-19}
class Person implements Cloneable {
  private String name;

  public Person(String name) {
    this.name = name;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  @Override
  protected Object clone() throws CloneNotSupportedException {
    return super.clone();
  }
}
```

```java {5}
public static void main(String[] args) {
  Person p = new Person("ç‹ä¸€åš");

  try {
    Person pClone = (Person) p.clone();

    System.out.println(p);      //com.atguigu07.object.Person@b4c966a
    System.out.println(pClone); //com.atguigu07.object.Person@2f4d3709

    p.setName("é™ˆä¼Ÿéœ†");
    System.out.println(p.getName());      //é™ˆä¼Ÿéœ†
    System.out.println(pClone.getName()); //ç‹ä¸€åš

  } catch (CloneNotSupportedException e) {
    throw new RuntimeException(e);
  }
}
```

:::



### <span style="text-decoration:line-through; color:#808080;">finalize() [å·²è¿‡æ—¶]</span>

`finalize()` æ–¹æ³•ç”¨äºå½“ä¸€ä¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶æ—¶ï¼Œå¯ä»¥è‡ªå®šä¹‰æ“ä½œã€‚ä½†åœ¨ java9 ä¹‹åï¼Œå°±è¢«æ ‡è¯†ä¸ºè¿‡æ—¶äº†ï¼Œç°åœ¨æˆ‘ä»¬æ— éœ€æ‰‹åŠ¨åƒåœ¾å›æ”¶ï¼Œäº†è§£å³å¯ã€‚

::: code-group

```java
class Person {
  private String name;

  @Override
  protected void finalize() throws Throwable {
    System.out.println("åƒåœ¾è¢«å›æ”¶");
  }
}
```

```java
public static void main(String[] args) {
  Person1 p = new Person1();
  //på¯¹è±¡å·²ç»æ²¡æœ‰äº†å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶
  p = null;
  //æ‰‹åŠ¨åƒåœ¾å›æ”¶
  System.gc();

  try {
    Thread.sleep(1000);
  } catch (InterruptedException e) {
    throw new RuntimeException(e);
  }
}
```

:::





